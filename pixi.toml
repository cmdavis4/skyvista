[workspace]
name = "skyvista"
version = "0.1.0"
description = "PyVista-based 3D visualization for atmospheric data"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-64", "osx-arm64"]

[dependencies]
# Core required dependencies
python = ">=3.8"
pyvista = ">=0.38"
numpy = "*"
xarray = "*"
pip = "*"

[feature.blender.dependencies]
# Blender integration dependencies
# Note: bpy (Blender as Python module) must be installed separately
pandas = "*"

[feature.vdb.dependencies]
# VDB volume rendering support
pyopenvdb = "*"

[feature.test.dependencies]
# Testing tools
pytest = ">=7.0"
pytest-cov = "*"

[feature.dev.dependencies]
# Development tools
black = "*"
ruff = "*"
mypy = "*"
ipython = "*"
jupyter = "*"

[environments]
# Minimal environment - core functionality
minimal = {features = ["test"], solve-group = "minimal"}

# Blender environment - includes blender integration
blender = {features = ["blender", "vdb", "test"], solve-group = "blender"}

# Development environment - includes everything
dev = {features = ["test", "dev"], solve-group = "dev"}

[tasks]
# Install the package in editable mode
install = "pip install -e ."

# Run all tests
test = {cmd = "pytest tests/ -v", depends-on = ["install"]}

# Run tests with coverage
test-cov = {cmd = "pytest tests/ -v --cov=skyvista --cov-report=term-missing --cov-report=html", depends-on = ["install"]}

# Format code
format = "black skyvista/ tests/"

# Lint code
lint = "ruff check skyvista/ tests/"

# Type check
typecheck = "mypy skyvista/"

# Run all quality checks
check = {depends-on = ["format", "lint", "typecheck"]}

# Clean up build artifacts and caches
clean = "rm -rf build/ dist/ *.egg-info .pytest_cache/ .coverage .mypy_cache/ __pycache__/ skyvista/__pycache__/ tests/__pycache__/ htmlcov/"
